#!/usr/bin/env bash

set -o errexit -o pipefail

main() {
    init

    #@ -h,--help | print this text
    #@ list | Print installed packages
    list::installed
}

list::installed() {
    if [[ ! -d "${SELF_STATE_DIR}/index" ]]; then
	log::fatal "Index not found."
    fi

    for n in "${SELF_STATE_DIR}/index/"*; do
	printf '%s\n' "${n##*/}"
    done
}

main "$@"
